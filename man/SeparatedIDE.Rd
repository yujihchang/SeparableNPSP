% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/SeparatedIDE.R
\name{SeparatedIDE}
\alias{SeparatedIDE}
\title{Separated Direct and Indirect Effects under (Semi)Competing Risks}
\usage{
SeparatedIDE(P.time, data, type = "SP")
}
\arguments{
\item{P.time}{A numeric vector of time points at which to evaluate the difference
in the cumulative distribution function (difference in cdf). For example,
\code{c(12, 24, 36)} for 12/24/36 months.}

\item{data}{A data frame or matrix with the following required columns:
\itemize{
  \item \code{X1}: observed intermediate event times.
  \item \code{X2}: observed primary (terminal) event times.
  \item \code{D1}: indicator for the intermediate event (1 = occurred, 0 = otherwise).
  \item \code{D2}: indicator for the primary event (1 = occurred, 0 = otherwise).
  \item \code{S}: exposure level, encoded with two levels; the function internally maps
  the first observed level to 0 and the second to 1 (i.e., \code{za = 0}, \code{zb = 1}).
}}

\item{type}{Analysis setting. One of:
\itemize{
  \item \code{"SP"}: semicompeting risks method (default).
  \item \code{"CP"}: competing risks method.
}}
}
\description{
Analyzes differences in the cumulative distribution function (difference in cdf)
under semicompeting risks or competing risks settings. The procedure utilizes
Cox-type cumulative hazards (via Nelson--Aalen style increments and internal
utilities) to compute cumulative risks under different exposure levels and then
derives separable direct and indirect effect curves.
}
\details{
Internally, the function:
\enumerate{
  \item Splits the sample by exposure \code{S} (mapped to 0/1).
  \item Estimates cumulative hazards for the intermediate and terminal processes,
        including the semicompeting component when \code{type = "SP"}.
  \item Constructs counterfactual risk components and aggregates them to obtain
        \eqn{S_{00}}, \eqn{S_{10}}, \eqn{S_{11}}.
  \item Forms the separable direct effect curve \code{DE = S10 - S00} and the
        separable indirect effect curve \code{IE = S11 - S10}.
  \item Provides simple standard error curves \code{DEsd} and \code{IEsd} via a
        sandwich-style approximation based on the observed information of the
        baseline hazard increments.
}
Time points in \code{P.time} are evaluated on the same time scale as \code{X1} and \code{X2}.
Input data should be preprocessed so that times and indicators are consistent and
administrative censoring is encoded in \code{D1}/\code{D2}.
}
\value{
A list with components:
\itemize{
  \item \code{P.time}: the evaluation time grid (as provided).
  \item \code{DE}: separable direct effect curve evaluated at \code{P.time}.
  \item \code{IE}: separable indirect effect curve evaluated at \code{P.time}.
  \item \code{S10}, \code{S00}, \code{S11}: cumulative risk components under
        corresponding exposure combinations.
  \item \code{Comp_part_IE}: indirect-effect contribution from the competing part
        (\code{S11 - S10} attributable to the competing component).
  \item \code{Semi_part_IE}: indirect-effect contribution from the semicompeting part.
  \item \code{DEsd}: pointwise standard error estimates for \code{DE}.
  \item \code{IEsd}: pointwise standard error estimates for \code{IE}.
}
}
\examples{
\donttest{
## Minimal example using the built-in data object 'expdata'
## (ships with the package under data/expdata.rda)
data("expdata", package = "SeparableNPSP")
data <- expdata

## Time grid
P.time <- seq(0, 1.5, by = 0.01)

## Run
ans <- SeparatedIDE(P.time, data, type = "SP")

## Quick plot
plot(P.time, ans$DE, type = "l",
     xlab = "Time", ylab = "Effect")
lines(P.time, ans$IE, lty = 2)
legend("topleft", c("DE","IE"), lty = c(1,2), bty = "n")
}
}
\keyword{survival}
\keyword{mediation}
\keyword{semicompeting-risks}
\seealso{
\code{\link{Xu2010}}
}
